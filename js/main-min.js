var MK=MK||{};var JST=JST||{};MK.data={};Backbone.Layout.configure({manage:true,prefix:"templates/",fetchTemplate:function(b){b=b+".html";if(JST[b]){return JST[b]}var a=this.async();$.ajax({cache:false,type:"GET",url:b,dataType:"text",success:function(c){a(_.template(c))}})}});MK.Router=Backbone.Router.extend({routes:{"":"index","!index":"index","!shop":"shop","!shop_form":"shop_form","!collections":"fallWinter","!fall-winter":"fallWinter","!spring-summer":"springSummer","!films":"films","!about":"about","!contact":"contact"},index:function(){$("#content").empty();MK.defaultStyle();var a=$("body").attr("class");if(a!=undefined){$("body").removeClass("pages")}},shop:function(){$(".videoBG").hide();MK.defaultStyle();MK.addHeaderSidebar();MK.shop.render()},collections:function(){$(".videoBG").hide();MK.defaultStyle();MK.addHeaderSidebar()},fallWinter:function(){MK.defaultStyle();MK.addHeaderSidebar();MK.getCollection("fall_winter")},springSummer:function(){MK.defaultStyle();MK.addHeaderSidebar();MK.getCollection("spring_summer")},films:function(){$(".videoBG").hide();MK.defaultStyle();MK.addHeaderSidebar();MK.films.render()},about:function(){$(".videoBG").hide();MK.defaultStyle();MK.addHeaderSidebar();MK.about.render()},contact:function(){$(".videoBG").hide();$("body").addClass("contact_bg");$(".contact_bg:eq(1)").unwrap();$(".videoBG").remove();$("#drop_menu").hide();MK.addHeaderSidebar();MK.contact.render()}});MK.defaultStyle=function(){$("body").removeClass("contact_bg");$(".videoBG_wrapper").unwrap();$("#container").removeClass("navLeft");$("#drop_menu").hide()};MK.addHeaderSidebar=function(){var a=$("body").attr("class");if(a!="pages"){$("body").addClass("pages")}$("body").removeClass("ie_bg")};MK.getCollection=function(a){$.getJSON("data/collections.json",function(b){$.extend(MK.data,b);model=b[a];switch(a){case"fall_winter":MK.fallWinter=new MK.FallWinter({data:model});break;case"spring_summer":MK.springSummer=new MK.SpringSummer({data:model});break}})};MK.FallWinter=Backbone.Layout.extend({template:"fall_winter",el:"#content",initialize:function(){$(".pages:eq(1)").unwrap();$(".videoBG").remove();$("#top_nav #drop_menu").show();this.render()}});MK.SpringSummer=Backbone.Layout.extend({template:"spring_summer",el:"#content",initialize:function(){$(".pages:eq(1)").unwrap();$(".videoBG").remove();$("#top_nav #drop_menu").show();this.render()}});MK.Fashion=Backbone.Layout.extend({template:"fashion",el:"#content",initialize:function(){}});MK.Films=Backbone.Layout.extend({template:"films",el:"#content",events:{"click .video1":"changeVid1","click .video2":"changeVid2"},initialize:function(){},changeVid1:function(b){b.preventDefault();var a=$(b.currentTarget).attr("id");sublime.unprepare("XlAFca21jnM");sublime.prepare(a);$("#vid2").hide();$("#vid1").show()},changeVid2:function(b){b.preventDefault();var a=$(b.currentTarget).attr("id");sublime.unprepare("6TtN5c1gl8I");sublime.prepare(a);$("#vid1").hide();$("#vid2").show()}});MK.About=Backbone.Layout.extend({template:"about",el:"#content",initialize:function(){}});MK.Contact=Backbone.Layout.extend({template:"contact",el:"#content",initialize:function(){}});MK.Shop=Backbone.Layout.extend({template:"shop",el:"#content",initialize:function(){}});$(document).ready(function(){$(".fancybox").fancybox({padding:0,openEffect:"elastic"});(function(){var b=window.navigator.userAgent;var a=b.indexOf("MSIE ");if(a>0){$("body").addClass("ie_bg")}else{$("body").videoBG({position:"fixed",zIndex:0,mp4:"js/assets/nuloop.mp4",ogv:"js/assets/nuloop.ogv",webm:"js/assets/nuloop.webm",poster:"js/assets/poster.jpg",opacity:1,fullscreen:true})}return false})();$(".topnav").on("click",function(a){$(".topnav").each(function(b){$(this).removeClass("ulineBlack");$(a.currentTarget).addClass("ulineBlack")})});$("#collections").on("mouseenter",function(a){$("#top_nav #drop_menu").show()});$("#collections_home").on("mouseenter",function(a){$("#bottom_nav #drop_menu").show()});$("#top_nav .dropdown_nav").on("mouseleave",function(a){$(this).find("#drop_menu").hide()});$("#bottom_nav .dropdown_nav").on("mouseleave",function(a){$(this).find("#drop_menu").hide()});MK.about=new MK.About();MK.contact=new MK.Contact();MK.films=new MK.Films();MK.shop=new MK.Shop();MK.router=new MK.Router();Backbone.history.start()});